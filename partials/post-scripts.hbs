<script>
    const progressBar = document.querySelector('.reading-progress');

    function updateProgress() {
        const totalHeight = document.body.clientHeight;
        const windowHeight = document.documentElement.clientHeight;
        const position = window.scrollY;
        const progress = position / (totalHeight - windowHeight) * 100;
        progressBar.setAttribute('value', progress);
        requestAnimationFrame(updateProgress);
    }

    requestAnimationFrame(updateProgress);
</script>
<script>
    const allLinkInsideArticle = document.querySelectorAll('#article-content a');
    allLinkInsideArticle.forEach((link) => {
        const hasSup = link.querySelector('sup');
        if (hasSup) {
            link.classList.add('has-sup');
        }
    });
</script>
<script type="module">
    import slugify from "{{asset "js/slufify.css"}}";

    const allH4 = document.querySelectorAll('#article-content h4');
    allH4.forEach((h4) => {
        const id = h4.id;
        const slugifiedContent = slugify(h4.textContent);

        if (!id) {
            h4.id = slugifiedContent;
        } else if (id !== slugifiedContent) {
            h4.id = slugifiedContent;
        }
    });
</script>
